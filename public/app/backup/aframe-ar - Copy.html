<!-- Augmented Reality on the Web in 10 lines of html! https://github.com/jeromeetienne/ar.js -->
<script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
<script src="../vendor/aframe-ar.js"></script>
<script src="../vendor/aframe-canvas.js"></script>

<style>
    canvas {
        width: 100% !important;
        height: 100% !important;
    }
    
    #arjsDebugUIContainer {
        display: none;
    }
    
    .a-enter-vr {
        display: none;
    }
</style>

<body style="margin: 0px; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam;">
        <a-plane id="fakeObj" position="0 1.25 -1" color="red" scale="3 3 3" canvas-material="width:500;height:500" />
        <a-box id="redbox" position="0 0 0" material="opacity: 0.5;" color="red"></a-box>
        <a-marker-camera preset="hiro"></a-marker-camera>
    </a-scene>
    <script>
        var component = document.querySelector("#fakeObj").components["canvas-material"];
        var ctx = component.getContext()

        function getRndColor() {
            var r = 255 * Math.random() | 0,
                g = 255 * Math.random() | 0,
                b = 255 * Math.random() | 0;
            return 'rgb(' + r + ',' + g + ',' + b + ')';
        }
        window.setInterval(function () {

            ctx.clearRect(0, 0, 500, 500);
            ctx.fillStyle = getRndColor();
            ctx.fillRect(Math.random() * 500, Math.random() * 500, 50, 50);
            ctx.fillStyle = "black";
            ctx.font = "100px serif";
            ctx.fillText("Hello world", 10, 100);
            //this update function says to update the texture in aframe 
            component.updateTexture();
        }, 100)
    </script>
</body>